<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë¦¬ë”ì‹­ ìœ í˜• ì²´í¬ (ì›Œí¬ìƒµìš©)</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#111111;
      --muted:#555555;
      --red:#d00000;
      --redSoft:#ffe5e5;
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;background:#fff;color:#111}
    .wrap{max-width:860px;margin:0 auto;padding:22px 16px 90px}
    header{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:flex-end;margin-bottom:14px}
    h1{margin:0;font-size:20px}
    .sub{margin:6px 0 0;color:var(--muted);font-size:13px}
    .status{border:2px solid var(--red);border-radius:999px;padding:7px 10px;font-size:12px;font-weight:900}
    .list{display:flex;flex-direction:column;gap:10px}
    .card{border:2px solid var(--red);border-radius:var(--radius);padding:12px;background:#fff}
    .q{font-weight:900;font-size:14px;margin:0 0 10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .row{display:flex;gap:10px}
    .btn{border:2px solid var(--red);background:#fff;padding:9px 12px;border-radius:12px;font-weight:900;cursor:pointer;min-width:110px}
    .btn.selected{background:var(--redSoft)}
    .sticky{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:2px solid var(--red);padding:10px}
    .inner{max-width:860px;margin:0 auto;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .bar{width:220px;height:10px;border:2px solid var(--red);border-radius:999px;overflow:hidden}
    .bar>div{height:100%;background:var(--red)}
    .action{border:2px solid var(--red);background:#fff;padding:9px 12px;border-radius:12px;font-weight:900;cursor:pointer}
    .primary{background:var(--red);color:#fff}
    .action:disabled{opacity:.4}
    .result{margin-top:14px;border:2px solid var(--red);border-radius:var(--radius);padding:14px}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>ë¦¬ë”ì‹­ ìœ í˜• ì²´í¬</h1>
      <p class="sub">ê° ë¬¸í•­ì— ëŒ€í•´ Y / Nì„ ì„ íƒí•˜ì„¸ìš”.</p>
    </div>
    <div class="status" id="status">0/28</div>
  </header>
  <div id="questions" class="list"></div>
  <div id="result" class="result" style="display:none"></div>
</div>

<div class="sticky">
  <div class="inner">
    <div class="bar"><div id="prog"></div></div>
    <div>
      <button class="action primary" id="calc" disabled>ë‚´ ìœ í˜• ë³´ê¸°</button>
      <button class="action" id="reset">ì´ˆê¸°í™”</button>
    </div>
  </div>
</div>

<script>
const ORIGINAL_BANK = [
  // í•´ê²°ì‚¬í˜•
  {type:"í•´ê²°ì‚¬í˜•", text:"íŒ€ì›ì´ ì§ˆë¬¸í•˜ë©´ ë°”ë¡œ ë‹µì„ ì£¼ëŠ” í¸ì´ë‹¤"},
  {type:"í•´ê²°ì‚¬í˜•", text:"íŒ€ì›ì˜ ì—…ë¬´ ì²˜ë¦¬ê°€ ë‹µë‹µí•˜ë©´ ë‚´ê°€ ì§ì ‘ í•˜ëŠ” ê²ƒì´ ë¹ ë¥´ë‹¤ê³  ëŠë‚€ë‹¤"},
  {type:"í•´ê²°ì‚¬í˜•", text:"íŒ€ì›ì˜ ì‹œí–‰ì°©ì˜¤ë¥¼ ê¸°ë‹¤ë¦¬ê¸° ì–´ë µë‹¤"},
  {type:"í•´ê²°ì‚¬í˜•", text:"íšŒì˜ë¥¼ í•˜ë©´ ê²°ë¡ ì„ ë¹¨ë¦¬ ë‚´ë ¤ì£¼ê³  ì‹¶ë‹¤"},
  {type:"í•´ê²°ì‚¬í˜•", text:"íŒ€ì›ì˜ ì¼ì´ ëŠ˜ì–´ì§ˆë•Œ ë‚´ê°€ ê°œì…í•´ì•¼ ì•ˆì‹¬ëœë‹¤"},
  {type:"í•´ê²°ì‚¬í˜•", text:"íŒ€ì›ì´ ê³ ë¯¼í•˜ëŠ” ì‹œê°„ì´ ë¹„íš¨ìœ¨ì²˜ëŸ¼ ëŠê»´ì§ˆ ë•Œê°€ ìˆë‹¤"},
  {type:"í•´ê²°ì‚¬í˜•", text:"ë‚´ê°€ ë¹ ì§€ë©´ ì¼ì˜ ì§„í–‰ì´ ë¶ˆì•ˆí•´ì§ˆ ê²ƒ ê°™ë‹¤"},

  // ë³´í˜¸ìí˜•
  {type:"ë³´í˜¸ìí˜•", text:"íŒ€ì›ì˜ ê°ì • ìƒíƒœê°€ ë‚˜ì˜ ì—…ë¬´ íŒë‹¨ì— í¬ê²Œ ì˜í–¥ì„ ì¤€ë‹¤"},
  {type:"ë³´í˜¸ìí˜•", text:"íŒ€ì›ì´ í˜ë“¤ì–´ ë³´ì´ë©´ ê¸°ì¤€ì„ ë‚®ì¶”ëŠ” í¸ì´ë‹¤"},
  {type:"ë³´í˜¸ìí˜•", text:"ì„±ê³¼ë³´ë‹¤ íŒ€ì›ì˜ ìƒíƒœë¥¼ ë¨¼ì € ê³ ë ¤í•œë‹¤"},
  {type:"ë³´í˜¸ìí˜•", text:"íŒ€ì›ê³¼ ê°ˆë“± ìƒí™©ì„ ë˜ë„ë¡ ë§Œë“¤ì§€ ì•Šìœ¼ë ¤ í•œë‹¤"},
  {type:"ë³´í˜¸ìí˜•", text:"íŒ€ì›ì˜ ìƒíƒœì— ê³µê° í›„ ê¸°ì¤€ì„ ë§í•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤"},
  {type:"ë³´í˜¸ìí˜•", text:"íŒ€ì›ì´ ìƒì²˜ ë°›ì„ê¹Œ ë´ í”¼ë“œë°±ì„ ë¯¸ë£¬ ì ì´ ìˆë‹¤"},
  {type:"ë³´í˜¸ìí˜•", text:"íŒ€ì›ì˜ ì–´ë ¤ì›€ì„ ë‚´ê°€ ëŒ€ì‹  ì•ˆê³  ê°€ëŠ” í¸ì´ë‹¤"},

  // ê´€ë¦¬ìí˜•
  {type:"ê´€ë¦¬ìí˜•", text:"ë³´ê³  í˜•ì‹ì´ë‚˜ ì ˆì°¨ê°€ ì–´ê¸‹ë‚˜ë©´ ì‹ ê²½ ì“°ì¸ë‹¤"},
  {type:"ê´€ë¦¬ìí˜•", text:"ì •í•´ì§„ ê·œì¹™(í”„ë¡œì„¸ìŠ¤)ì´ ì§€ì¼œì§€ì§€ ì•Šìœ¼ë©´ ê°œì…í•œë‹¤"},
  {type:"ê´€ë¦¬ìí˜•", text:"íŒ€ì›ì˜ ì—…ë¬´ ê³¼ì • ê´€ë¦¬ì— ë§ì€ ì—ë„ˆì§€ë¥¼ ì“´ë‹¤"},
  {type:"ê´€ë¦¬ìí˜•", text:"ì—…ë¬´ ì§„í–‰ ì‹œ ì˜ˆì™¸ ìƒí™©ì´ ìƒê¸°ë©´ ë¶ˆí¸í•¨ì„ ëŠë‚€ë‹¤"},
  {type:"ê´€ë¦¬ìí˜•", text:"ì¼ì€ ê¸°ì¤€ëŒ€ë¡œ ì§„í–‰ë˜ì–´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤"},
  {type:"ê´€ë¦¬ìí˜•", text:"ë‚˜ì—ê²Œ ë³´ê³  ì—†ì´ ì§„í–‰ë˜ëŠ” ì¼ì´ ë¶ˆì•ˆí•˜ë‹¤"},
  {type:"ê´€ë¦¬ìí˜•", text:"í†µì œë˜ì§€ ì•ŠëŠ” ìƒí™©ì„ ë¶€ë‹´ìŠ¤ëŸ½ê²Œ ëŠë‚€ë‹¤"},

  // ê¸°ì¤€í˜•
  {type:"ê¸°ì¤€í˜•", text:"ë°”ë¡œ ë‹µì„ ì£¼ê¸°ë³´ë‹¤ íŒë‹¨ ê¸°ì¤€ì„ ë¨¼ì € ë¬»ëŠ”ë‹¤"},
  {type:"ê¸°ì¤€í˜•", text:"ê²°ì •ì€ íŒ€ì›ì´ í•˜ë˜ ê¸°ì¤€ì€ ëª…í™•íˆ ì œì‹œí•œë‹¤"},
  {type:"ê¸°ì¤€í˜•", text:"ì§€ê¸ˆ ë‹¹ì¥ì€ ë‚´ê°€ ì •ë¦¬í•´ì£¼ë©´ ë¹ ë¥´ì§€ë§Œ, íŒ€ì›ì´ ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ê²Œ ë‘ëŠ” í¸ì´ë‹¤"},
  {type:"ê¸°ì¤€í˜•", text:"ê°ì •ì— ê³µê°í•˜ë˜ ê¸°ì¤€ì€ ë¶„ë¦¬í•´ ë§í•œë‹¤"},
  {type:"ê¸°ì¤€í˜•", text:"íŒ€ì›ì´ íŒë‹¨í•´ì•¼ í•  ìƒí™©ì—ì„œ, ë‚´ê°€ ëŒ€ì‹  ë‹µì„ ì£¼ë ¤ëŠ” ìˆœê°„ì„ ì˜ì‹ì ìœ¼ë¡œ ë©ˆì¶˜ë‹¤"},
  {type:"ê¸°ì¤€í˜•", text:"ë‚´ íŒë‹¨ì´ ê¸°ì¤€ì— ë§ëŠ”ì§€ ìŠ¤ìŠ¤ë¡œ ì ê²€í•œë‹¤"},
  {type:"ê¸°ì¤€í˜•", text:"íŒ€ì›ì—ê²Œ ê¸°ì¤€ì„ ì„¤ëª…í•˜ëŠ” ë° ì‹œê°„ì„ ì“´ë‹¤"},
];

const TYPES = ["í•´ê²°ì‚¬í˜•","ë³´í˜¸ìí˜•","ê´€ë¦¬ìí˜•","ê¸°ì¤€í˜•"];
const MAX_PER_TYPE = 7;

// ì„ê¸° (í˜ì´ì§€ ë¡œë“œë§ˆë‹¤ ëœë¤)
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

const BANK = shuffle(ORIGINAL_BANK.slice());
const answers = Array(BANK.length).fill(null);

const qWrap = document.getElementById("questions");
const status = document.getElementById("status");
const prog = document.getElementById("prog");
const calcBtn = document.getElementById("calc");
const resetBtn = document.getElementById("reset");
const result = document.getElementById("result");

function render(){
  qWrap.innerHTML = "";
  BANK.forEach((q, i) => {
    const ySel = answers[i] === true ? "selected" : "";
    const nSel = answers[i] === false ? "selected" : "";
    qWrap.insertAdjacentHTML("beforeend", `
      <div class="card">
        <div class="q" title="${q.text}">${i+1}. ${q.text}</div>
        <div class="row">
          <button class="btn ${ySel}" data-i="${i}" data-v="Y" type="button">Y</button>
          <button class="btn ${nSel}" data-i="${i}" data-v="N" type="button">N</button>
        </div>
      </div>
    `);
  });

  // âœ… í´ë¦­ ë¡œì§ ì•ˆì „í•˜ê²Œ: ì´ë²¤íŠ¸ íƒ€ê²Ÿ ê¸°ì¤€ìœ¼ë¡œ ì²˜ë¦¬
  document.querySelectorAll(".btn").forEach(btn => {
    btn.addEventListener("click", (e) => {
      const el = e.currentTarget;
      const i = Number(el.dataset.i);
      const v = el.dataset.v;
      answers[i] = (v === "Y");
      render();
      update();
    });
  });
}

function update(){
  const done = answers.filter(v => v !== null).length;
  status.textContent = `${done}/${BANK.length}`;
  prog.style.width = `${(done / BANK.length) * 100}%`;
  calcBtn.disabled = done !== BANK.length;
}

function computeScores(){
  const score = Object.fromEntries(TYPES.map(t => [t, 0]));
  BANK.forEach((q, i) => {
    if (answers[i] === true) score[q.type] += 1;
  });
  const ranked = TYPES.map(t => ({type:t, score:score[t]}))
                      .sort((a,b)=> b.score - a.score);
  return {score, ranked};
}

calcBtn.addEventListener("click", () => {
  const missing = answers.some(v => v === null);
  if (missing) { alert("ë¯¸ì‘ë‹µ ë¬¸í•­ì´ ìˆìŠµë‹ˆë‹¤."); return; }

  const {score, ranked} = computeScores();
  const top = ranked[0], second = ranked[1];

  // âœ… 'ì„¸ë¶€ ê²°ê³¼'ê°€ ë³´ì´ë„ë¡ 4ìœ í˜• ì ìˆ˜ë„ ê°™ì´ ì¶œë ¥
  const META = {
    "í•´ê²°ì‚¬í˜•": { icon: "âš¡", desc: "ì†ë„ì™€ ì¦‰ê°ì  í•´ê²°ë¡œ ìƒí™©ì„ ì •ë¦¬í•˜ëŠ” ë¦¬ë”ì‹­" },
    "ë³´í˜¸ìí˜•": { icon: "ğŸ›¡ï¸", desc: "ì‚¬ëŒê³¼ ë¶„ìœ„ê¸°ë¥¼ ë¨¼ì € ì‚´í”¼ëŠ” ë¦¬ë”ì‹­" },
    "ê´€ë¦¬ìí˜•": { icon: "ğŸ“‹", desc: "ê·œì¹™ê³¼ êµ¬ì¡°ë¡œ ì•ˆì •ì„±ì„ ë§Œë“œëŠ” ë¦¬ë”ì‹­" },
    "ê¸°ì¤€í˜•":   { icon: "ğŸ§­", desc: "ê¸°ì¤€ê³¼ ë°©í–¥ìœ¼ë¡œ íŒë‹¨ì„ ë§¡ê¸°ëŠ” ë¦¬ë”ì‹­" },
  };

  result.style.display = "block";
  result.innerHTML = `
    <div style="font-weight:900; margin-bottom:10px;">
      ì£¼ìš” ìœ í˜•: ${META[top.type].icon} ${top.type} (${top.score}/${MAX_PER_TYPE})<br>
      <span style="font-size:13px; font-weight:400;">${META[top.type].desc}</span><br><br>
      ë³´ì¡° ìœ í˜•: ${META[second.type].icon} ${second.type} (${second.score}/${MAX_PER_TYPE})
    </div>

    <div style="margin-top:12px; display:flex; flex-direction:column; gap:8px;">
      ${TYPES.map(t => {
        const pct = (score[t] / MAX_PER_TYPE) * 100;
        return `
          <div style="border:2px solid var(--red); border-radius:12px; padding:10px; display:flex; gap:10px; align-items:center;">
            <div style="font-size:20px;">${META[t].icon}</div>
            <div style="flex:1;">
              <div style="display:flex; justify-content:space-between; font-weight:900; margin-bottom:4px;">
                <span>${t}</span><span>${score[t]}/${MAX_PER_TYPE}</span>
              </div>
              <div style="font-size:12px; color:#555; margin-bottom:6px;">${META[t].desc}</div>
              <div style="height:8px; border:2px solid var(--red); border-radius:999px; overflow:hidden;">
                <div style="height:100%; width:${pct}%; background:var(--red);"></div>
              </div>
            </div>
          </div>
        `;
      }).join("")}
    </div>
  `;
  result.scrollIntoView({behavior:"smooth"});
});

resetBtn.addEventListener("click", () => {
  answers.fill(null);
  result.style.display = "none";
  render();
  update();
  window.scrollTo({top:0, behavior:"smooth"});
});

render();
update();
</script>
</body>
</html>
